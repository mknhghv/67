--[[
    零域 (ZERO SECTOR) | 專業版啟動器
    功能：名字認證 + HWID 設備鎖 + 指定核心路徑
]]

local Players = game:GetService("Players")
local StarterGui = game:GetService("StarterGui")
local localPlayer = Players.LocalPlayer
local hwid = game:GetService("RbxAnalyticsService"):GetClientId()

-- 【白名單資料庫】 玩家名字 = "HWID"
local Whitelist = {
    ["mknhghv"] = "bc20243e-9910-474c-84d1-35376a4ed208",
    ["mknhghv"] = "9DD71E58-A668-43DB-A8D5-D5FB5A1C80A1",
}

-- 認證函數
local function Authenticate()
    local name = localPlayer.Name
    
    -- 1. 檢查名字是否在白名單
    if Whitelist[name] then
        -- 2. 檢查 HWID 是否匹配
        if Whitelist[name] == hwid then
            -- 成功：顯示通知
            StarterGui:SetCore("SendNotification", {
                Title = "零域 | 認證成功",
                Text = "歡迎回來: " .. name .. "\n核心模組加載中...",
                Duration = 5
            })
            
            -- 【已修改】指向你的中文名核心功能檔案
            local coreUrl = "https://raw.githubusercontent.com/mknhghv/67/refs/heads/main/%E9%9B%B6%E8%85%B3%E6%9C%AC%E6%B8%AC%E8%A9%A6"
            
            -- 嘗試抓取內容
            local success, content = pcall(function() 
                return game:HttpGet(coreUrl) 
            end)
            
            if success and content and #content > 0 then
                -- 成功獲取代碼後執行
                local func, err = loadstring(content)
                if func then
                    func() 
                else
                    warn("核心腳本語法錯誤: " .. tostring(err))
                    localPlayer:Kick("核心載入失敗：腳本內部錯誤")
                end
            else
                -- 抓取失敗處理
                warn("無法獲取核心內容，請檢查 GitHub 連結狀態")
                localPlayer:Kick("核心載入失敗，請檢查網路或連結")
            end
        else
            -- HWID 不符：自動複製並 Kick
            if setclipboard then setclipboard(hwid) end
            localPlayer:Kick("\n【 零域 | 設備鎖定 】\n\n檢測到非授權設備！\n您的 ID 已自動複製，請發送給作者。\n\nID: " .. hwid)
        end
    else
        -- 名字不在白名單：自動複製並 Kick
        if setclipboard then setclipboard(hwid) end
        localPlayer:Kick("\n【 零域 | 認證失敗 】\n\n您不在白名單內！\n您的 ID 已自動複製，請聯繫作者登記。\n\nID: " .. hwid)
    end
end

-- 為了防止 XENO 加載時 UI 沒反應，稍微延遲執行
task.delay(1, function()
    Authenticate()
end)
